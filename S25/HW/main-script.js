// version: 2.0.4

(()=>{var{defineProperty:a,getOwnPropertyNames:U8,getOwnPropertyDescriptor:V8}=Object,q8=Object.prototype.hasOwnProperty;var k0=new WeakMap,w8=(Z)=>{var Q=k0.get(Z),X;if(Q)return Q;if(Q=a({},"__esModule",{value:!0}),Z&&typeof Z==="object"||typeof Z==="function")U8(Z).map((G)=>!q8.call(Q,G)&&a(Q,G,{get:()=>Z[G],enumerable:!(X=V8(Z,G))||X.enumerable}));return k0.set(Z,Q),Q};var F8=(Z,Q)=>{for(var X in Q)a(Z,X,{get:Q[X],enumerable:!0,configurable:!0,set:(G)=>Q[X]=()=>G})};var j9={};F8(j9,{waitForNajvaID:()=>Y8});var y0=function(Z){let Q=[],X=0;for(let G=0;G<Z.length;G++){let J=Z.charCodeAt(G);if(J<128)Q[X++]=J;else if(J<2048)Q[X++]=J>>6|192,Q[X++]=J&63|128;else if((J&64512)===55296&&G+1<Z.length&&(Z.charCodeAt(G+1)&64512)===56320)J=65536+((J&1023)<<10)+(Z.charCodeAt(++G)&1023),Q[X++]=J>>18|240,Q[X++]=J>>12&63|128,Q[X++]=J>>6&63|128,Q[X++]=J&63|128;else Q[X++]=J>>12|224,Q[X++]=J>>6&63|128,Q[X++]=J&63|128}return Q},j8=function(Z){let Q=[],X=0,G=0;while(X<Z.length){let J=Z[X++];if(J<128)Q[G++]=String.fromCharCode(J);else if(J>191&&J<224){let $=Z[X++];Q[G++]=String.fromCharCode((J&31)<<6|$&63)}else if(J>239&&J<365){let $=Z[X++],z=Z[X++],W=Z[X++],Y=((J&7)<<18|($&63)<<12|(z&63)<<6|W&63)-65536;Q[G++]=String.fromCharCode(55296+(Y>>10)),Q[G++]=String.fromCharCode(56320+(Y&1023))}else{let $=Z[X++],z=Z[X++];Q[G++]=String.fromCharCode((J&15)<<12|($&63)<<6|z&63)}}return Q.join("")},f0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob==="function",encodeByteArray(Z,Q){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();let X=Q?this.byteToCharMapWebSafe_:this.byteToCharMap_,G=[];for(let J=0;J<Z.length;J+=3){let $=Z[J],z=J+1<Z.length,W=z?Z[J+1]:0,Y=J+2<Z.length,K=Y?Z[J+2]:0,H=$>>2,N=($&3)<<4|W>>4,u=(W&15)<<2|K>>6,b=K&63;if(!Y){if(b=64,!z)u=64}G.push(X[H],X[N],X[u],X[b])}return G.join("")},encodeString(Z,Q){if(this.HAS_NATIVE_SUPPORT&&!Q)return btoa(Z);return this.encodeByteArray(y0(Z),Q)},decodeString(Z,Q){if(this.HAS_NATIVE_SUPPORT&&!Q)return atob(Z);return j8(this.decodeStringToByteArray(Z,Q))},decodeStringToByteArray(Z,Q){this.init_();let X=Q?this.charToByteMapWebSafe_:this.charToByteMap_,G=[];for(let J=0;J<Z.length;){let $=X[Z.charAt(J++)],W=J<Z.length?X[Z.charAt(J)]:0;++J;let K=J<Z.length?X[Z.charAt(J)]:64;++J;let N=J<Z.length?X[Z.charAt(J)]:64;if(++J,$==null||W==null||K==null||N==null)throw new v0;let u=$<<2|W>>4;if(G.push(u),K!==64){let b=W<<4&240|K>>2;if(G.push(b),N!==64){let H8=K<<6&192|N;G.push(H8)}}}return G},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)if(this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length)this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z}}};class v0 extends Error{constructor(){super(...arguments);this.name="DecodeBase64StringError"}}var x8=function(Z){let Q=y0(Z);return f0.encodeByteArray(Q,!0)},e=function(Z){return x8(Z).replace(/\./g,"")},B8=function(Z){try{return f0.decodeString(Z,!0)}catch(Q){console.error("base64Decode failed: ",Q)}return null};function M8(){if(typeof self!=="undefined")return self;if(typeof window!=="undefined")return window;if(typeof global!=="undefined")return global;throw new Error("Unable to locate global object.")}var P8=()=>M8().__FIREBASE_DEFAULTS__,I8=()=>{if(typeof process==="undefined"||typeof process.env==="undefined")return;let Z=process.env.__FIREBASE_DEFAULTS__;if(Z)return JSON.parse(Z)},L8=()=>{if(typeof document==="undefined")return;let Z;try{Z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(X){return}let Q=Z&&B8(Z[1]);return Q&&JSON.parse(Q)},N8=()=>{try{return P8()||I8()||L8()}catch(Z){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Z}`);return}};var Z0=()=>{var Z;return(Z=N8())===null||Z===void 0?void 0:Z.config};class Q0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,Q)=>{this.resolve=Z,this.reject=Q})}wrapCallback(Z){return(Q,X)=>{if(Q)this.reject(Q);else this.resolve(X);if(typeof Z==="function")if(this.promise.catch(()=>{}),Z.length===1)Z(Q);else Z(Q,X)}}}function m(){try{return typeof indexedDB==="object"}catch(Z){return!1}}function d(){return new Promise((Z,Q)=>{try{let X=!0,G="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(G);J.onsuccess=()=>{if(J.result.close(),!X)self.indexedDB.deleteDatabase(G);Z(!0)},J.onupgradeneeded=()=>{X=!1},J.onerror=()=>{var $;Q((($=J.error)===null||$===void 0?void 0:$.message)||"")}}catch(X){Q(X)}})}function u0(){if(typeof navigator==="undefined"||!navigator.cookieEnabled)return!1;return!0}var S8="FirebaseError";class B extends Error{constructor(Z,Q,X){super(Q);if(this.code=Z,this.customData=X,this.name=S8,Object.setPrototypeOf(this,B.prototype),Error.captureStackTrace)Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(Z,Q,X){this.service=Z,this.serviceName=Q,this.errors=X}create(Z,...Q){let X=Q[0]||{},G=`${this.service}/${Z}`,J=this.errors[Z],$=J?_8(J,X):"Error",z=`${this.serviceName}: ${$} (${G}).`;return new B(G,z,X)}}function _8(Z,Q){return Z.replace(R8,(X,G)=>{let J=Q[G];return J!=null?String(J):`<${G}?>`})}var R8=/\{\$([^}]+)}/g;function c(Z,Q){if(Z===Q)return!0;let X=Object.keys(Z),G=Object.keys(Q);for(let J of X){if(!G.includes(J))return!1;let $=Z[J],z=Q[J];if(E0($)&&E0(z)){if(!c($,z))return!1}else if($!==z)return!1}for(let J of G)if(!X.includes(J))return!1;return!0}function E0(Z){return Z!==null&&typeof Z==="object"}function X0(Z){if(Z&&Z._delegate)return Z._delegate;else return Z}class F{constructor(Z,Q,X){this.name=Z,this.instanceFactory=Q,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}var R="[DEFAULT]";class b0{constructor(Z,Q){this.name=Z,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){let Q=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(Q)){let X=new Q0;if(this.instancesDeferred.set(Q,X),this.isInitialized(Q)||this.shouldAutoInitialize())try{let G=this.getOrInitializeService({instanceIdentifier:Q});if(G)X.resolve(G)}catch(G){}}return this.instancesDeferred.get(Q).promise}getImmediate(Z){var Q;let X=this.normalizeInstanceIdentifier(Z===null||Z===void 0?void 0:Z.identifier),G=(Q=Z===null||Z===void 0?void 0:Z.optional)!==null&&Q!==void 0?Q:!1;if(this.isInitialized(X)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:X})}catch(J){if(G)return null;else throw J}else if(G)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,!this.shouldAutoInitialize())return;if(D8(Z))try{this.getOrInitializeService({instanceIdentifier:R})}catch(Q){}for(let[Q,X]of this.instancesDeferred.entries()){let G=this.normalizeInstanceIdentifier(Q);try{let J=this.getOrInitializeService({instanceIdentifier:G});X.resolve(J)}catch(J){}}}clearInstance(Z=R){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}async delete(){let Z=Array.from(this.instances.values());await Promise.all([...Z.filter((Q)=>("INTERNAL"in Q)).map((Q)=>Q.INTERNAL.delete()),...Z.filter((Q)=>("_delete"in Q)).map((Q)=>Q._delete())])}isComponentSet(){return this.component!=null}isInitialized(Z=R){return this.instances.has(Z)}getOptions(Z=R){return this.instancesOptions.get(Z)||{}}initialize(Z={}){let{options:Q={}}=Z,X=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let G=this.getOrInitializeService({instanceIdentifier:X,options:Q});for(let[J,$]of this.instancesDeferred.entries()){let z=this.normalizeInstanceIdentifier(J);if(X===z)$.resolve(G)}return G}onInit(Z,Q){var X;let G=this.normalizeInstanceIdentifier(Q),J=(X=this.onInitCallbacks.get(G))!==null&&X!==void 0?X:new Set;J.add(Z),this.onInitCallbacks.set(G,J);let $=this.instances.get(G);if($)Z($,G);return()=>{J.delete(Z)}}invokeOnInitCallbacks(Z,Q){let X=this.onInitCallbacks.get(Q);if(!X)return;for(let G of X)try{G(Z,Q)}catch(J){}}getOrInitializeService({instanceIdentifier:Z,options:Q={}}){let X=this.instances.get(Z);if(!X&&this.component){if(X=this.component.instanceFactory(this.container,{instanceIdentifier:A8(Z),options:Q}),this.instances.set(Z,X),this.instancesOptions.set(Z,Q),this.invokeOnInitCallbacks(X,Z),this.component.onInstanceCreated)try{this.component.onInstanceCreated(this.container,Z,X)}catch(G){}}return X||null}normalizeInstanceIdentifier(Z=R){if(this.component)return this.component.multipleInstances?Z:R;else return Z}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A8(Z){return Z===R?void 0:Z}function D8(Z){return Z.instantiationMode==="EAGER"}class G0{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){let Q=this.getProvider(Z.name);if(Q.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);Q.setComponent(Z)}addOrOverwriteComponent(Z){if(this.getProvider(Z.name).isComponentSet())this.providers.delete(Z.name);this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);let Q=new b0(Z,this);return this.providers.set(Z,Q),Q}getProviders(){return Array.from(this.providers.values())}}var O8=[],U;(function(Z){Z[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT"})(U||(U={}));var h8={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},C8=U.INFO,T8={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},k8=(Z,Q,...X)=>{if(Q<Z.logLevel)return;let G=new Date().toISOString(),J=T8[Q];if(J)console[J](`[${G}]  ${Z.name}:`,...X);else throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`)};class J0{constructor(Z){this.name=Z,this._logLevel=C8,this._logHandler=k8,this._userLogHandler=null,O8.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in U))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel=typeof Z==="string"?h8[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if(typeof Z!=="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...Z),this._logHandler(this,U.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...Z),this._logHandler(this,U.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,U.INFO,...Z),this._logHandler(this,U.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,U.WARN,...Z),this._logHandler(this,U.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...Z),this._logHandler(this,U.ERROR,...Z)}}var E8=(Z,Q)=>Q.some((X)=>Z instanceof X),m0,d0;function y8(){return m0||(m0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f8(){return d0||(d0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var c0=new WeakMap,z0=new WeakMap,g0=new WeakMap,$0=new WeakMap,K0=new WeakMap;function v8(Z){let Q=new Promise((X,G)=>{let J=()=>{Z.removeEventListener("success",$),Z.removeEventListener("error",z)},$=()=>{X(j(Z.result)),J()},z=()=>{G(Z.error),J()};Z.addEventListener("success",$),Z.addEventListener("error",z)});return Q.then((X)=>{if(X instanceof IDBCursor)c0.set(X,Z)}).catch(()=>{}),K0.set(Q,Z),Q}function u8(Z){if(z0.has(Z))return;let Q=new Promise((X,G)=>{let J=()=>{Z.removeEventListener("complete",$),Z.removeEventListener("error",z),Z.removeEventListener("abort",z)},$=()=>{X(),J()},z=()=>{G(Z.error||new DOMException("AbortError","AbortError")),J()};Z.addEventListener("complete",$),Z.addEventListener("error",z),Z.addEventListener("abort",z)});z0.set(Z,Q)}var W0={get(Z,Q,X){if(Z instanceof IDBTransaction){if(Q==="done")return z0.get(Z);if(Q==="objectStoreNames")return Z.objectStoreNames||g0.get(Z);if(Q==="store")return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return j(Z[Q])},set(Z,Q,X){return Z[Q]=X,!0},has(Z,Q){if(Z instanceof IDBTransaction&&(Q==="done"||Q==="store"))return!0;return Q in Z}};function p0(Z){W0=Z(W0)}function b8(Z){if(Z===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype))return function(Q,...X){let G=Z.call(g(this),Q,...X);return g0.set(G,Q.sort?Q.sort():[Q]),j(G)};if(f8().includes(Z))return function(...Q){return Z.apply(g(this),Q),j(c0.get(this))};return function(...Q){return j(Z.apply(g(this),Q))}}function m8(Z){if(typeof Z==="function")return b8(Z);if(Z instanceof IDBTransaction)u8(Z);if(E8(Z,y8()))return new Proxy(Z,W0);return Z}function j(Z){if(Z instanceof IDBRequest)return v8(Z);if($0.has(Z))return $0.get(Z);let Q=m8(Z);if(Q!==Z)$0.set(Z,Q),K0.set(Q,Z);return Q}var g=(Z)=>K0.get(Z);function M(Z,Q,{blocked:X,upgrade:G,blocking:J,terminated:$}={}){let z=indexedDB.open(Z,Q),W=j(z);if(G)z.addEventListener("upgradeneeded",(Y)=>{G(j(z.result),Y.oldVersion,Y.newVersion,j(z.transaction),Y)});if(X)z.addEventListener("blocked",(Y)=>X(Y.oldVersion,Y.newVersion,Y));return W.then((Y)=>{if($)Y.addEventListener("close",()=>$());if(J)Y.addEventListener("versionchange",(K)=>J(K.oldVersion,K.newVersion,K))}).catch(()=>{}),W}function p(Z,{blocked:Q}={}){let X=indexedDB.deleteDatabase(Z);if(Q)X.addEventListener("blocked",(G)=>Q(G.oldVersion,G));return j(X).then(()=>{return})}var d8=["get","getKey","getAll","getAllKeys","count"],c8=["put","add","delete","clear"],Y0=new Map;function l0(Z,Q){if(!(Z instanceof IDBDatabase&&!(Q in Z)&&typeof Q==="string"))return;if(Y0.get(Q))return Y0.get(Q);let X=Q.replace(/FromIndex$/,""),G=Q!==X,J=c8.includes(X);if(!(X in(G?IDBIndex:IDBObjectStore).prototype)||!(J||d8.includes(X)))return;let $=async function(z,...W){let Y=this.transaction(z,J?"readwrite":"readonly"),K=Y.store;if(G)K=K.index(W.shift());return(await Promise.all([K[X](...W),J&&Y.done]))[0]};return Y0.set(Q,$),$}p0((Z)=>({...Z,get:(Q,X,G)=>l0(Q,X)||Z.get(Q,X,G),has:(Q,X)=>!!l0(Q,X)||Z.has(Q,X)}));class t0{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map((Q)=>{if(g8(Q)){let X=Q.getImmediate();return`${X.library}/${X.version}`}else return null}).filter((Q)=>Q).join(" ")}}function g8(Z){let Q=Z.getComponent();return(Q===null||Q===void 0?void 0:Q.type)==="VERSION"}var U0="@firebase/app",i0="0.10.16",P=new J0("@firebase/app"),p8="@firebase/app-compat",l8="@firebase/analytics-compat",i8="@firebase/analytics",r8="@firebase/app-check-compat",s8="@firebase/app-check",o8="@firebase/auth",n8="@firebase/auth-compat",t8="@firebase/database",a8="@firebase/data-connect",e8="@firebase/database-compat",Z4="@firebase/functions",Q4="@firebase/functions-compat",X4="@firebase/installations",G4="@firebase/installations-compat",J4="@firebase/messaging",$4="@firebase/messaging-compat",z4="@firebase/performance",W4="@firebase/performance-compat",K4="@firebase/remote-config",Y4="@firebase/remote-config-compat",H4="@firebase/storage",U4="@firebase/storage-compat",V4="@firebase/firestore",q4="@firebase/vertexai",w4="@firebase/firestore-compat",F4="firebase";var V0="[DEFAULT]",j4={[U0]:"fire-core",[p8]:"fire-core-compat",[i8]:"fire-analytics",[l8]:"fire-analytics-compat",[s8]:"fire-app-check",[r8]:"fire-app-check-compat",[o8]:"fire-auth",[n8]:"fire-auth-compat",[t8]:"fire-rtdb",[a8]:"fire-data-connect",[e8]:"fire-rtdb-compat",[Z4]:"fire-fn",[Q4]:"fire-fn-compat",[X4]:"fire-iid",[G4]:"fire-iid-compat",[J4]:"fire-fcm",[$4]:"fire-fcm-compat",[z4]:"fire-perf",[W4]:"fire-perf-compat",[K4]:"fire-rc",[Y4]:"fire-rc-compat",[H4]:"fire-gcs",[U4]:"fire-gcs-compat",[V4]:"fire-fst",[w4]:"fire-fst-compat",[q4]:"fire-vertex","fire-js":"fire-js",[F4]:"fire-js-all"},l=new Map,x4=new Map,q0=new Map;function r0(Z,Q){try{Z.container.addComponent(Q)}catch(X){P.debug(`Component ${Q.name} failed to register with FirebaseApp ${Z.name}`,X)}}function I(Z){let Q=Z.name;if(q0.has(Q))return P.debug(`There were multiple attempts to register component ${Q}.`),!1;q0.set(Q,Z);for(let X of l.values())r0(X,Z);for(let X of x4.values())r0(X,Z);return!0}function E(Z,Q){let X=Z.container.getProvider("heartbeat").getImmediate({optional:!0});if(X)X.triggerHeartbeat();return Z.container.getProvider(Q)}var B4={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."},_=new S("app","Firebase",B4);class a0{constructor(Z,Q,X){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=X,this.container.addComponent(new F("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw _.create("app-deleted",{appName:this._name})}}function w0(Z,Q={}){let X=Z;if(typeof Q!=="object")Q={name:Q};let G=Object.assign({name:V0,automaticDataCollectionEnabled:!1},Q),J=G.name;if(typeof J!=="string"||!J)throw _.create("bad-app-name",{appName:String(J)});if(X||(X=Z0()),!X)throw _.create("no-options");let $=l.get(J);if($)if(c(X,$.options)&&c(G,$.config))return $;else throw _.create("duplicate-app",{appName:J});let z=new G0(J);for(let Y of q0.values())z.addComponent(Y);let W=new a0(X,G,z);return l.set(J,W),W}function F0(Z=V0){let Q=l.get(Z);if(!Q&&Z===V0&&Z0())return w0();if(!Q)throw _.create("no-app",{appName:Z});return Q}function x(Z,Q,X){var G;let J=(G=j4[Z])!==null&&G!==void 0?G:Z;if(X)J+=`-${X}`;let $=J.match(/\s|\//),z=Q.match(/\s|\//);if($||z){let W=[`Unable to register library "${J}" with version "${Q}":`];if($)W.push(`library name "${J}" contains illegal characters (whitespace or "/")`);if($&&z)W.push("and");if(z)W.push(`version name "${Q}" contains illegal characters (whitespace or "/")`);P.warn(W.join(" "));return}I(new F(`${J}-version`,()=>({library:J,version:Q}),"VERSION"))}var M4="firebase-heartbeat-database",P4=1,k="firebase-heartbeat-store",H0=null;function e0(){if(!H0)H0=M(M4,P4,{upgrade:(Z,Q)=>{switch(Q){case 0:try{Z.createObjectStore(k)}catch(X){console.warn(X)}}}}).catch((Z)=>{throw _.create("idb-open",{originalErrorMessage:Z.message})});return H0}async function I4(Z){try{let X=(await e0()).transaction(k),G=await X.objectStore(k).get(Z6(Z));return await X.done,G}catch(Q){if(Q instanceof B)P.warn(Q.message);else{let X=_.create("idb-get",{originalErrorMessage:Q===null||Q===void 0?void 0:Q.message});P.warn(X.message)}}}async function s0(Z,Q){try{let G=(await e0()).transaction(k,"readwrite");await G.objectStore(k).put(Q,Z6(Z)),await G.done}catch(X){if(X instanceof B)P.warn(X.message);else{let G=_.create("idb-set",{originalErrorMessage:X===null||X===void 0?void 0:X.message});P.warn(G.message)}}}function Z6(Z){return`${Z.name}!${Z.options.appId}`}var L4=1024,N4=2592000000;class Q6{constructor(Z){this.container=Z,this._heartbeatsCache=null;let Q=this.container.getProvider("app").getImmediate();this._storage=new X6(Q),this._heartbeatsCachePromise=this._storage.read().then((X)=>{return this._heartbeatsCache=X,X})}async triggerHeartbeat(){var Z,Q;try{let G=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),J=o0();if(((Z=this._heartbeatsCache)===null||Z===void 0?void 0:Z.heartbeats)==null){if(this._heartbeatsCache=await this._heartbeatsCachePromise,((Q=this._heartbeatsCache)===null||Q===void 0?void 0:Q.heartbeats)==null)return}if(this._heartbeatsCache.lastSentHeartbeatDate===J||this._heartbeatsCache.heartbeats.some(($)=>$.date===J))return;else this._heartbeatsCache.heartbeats.push({date:J,agent:G});return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(($)=>{let z=new Date($.date).valueOf();return Date.now()-z<=N4}),this._storage.overwrite(this._heartbeatsCache)}catch(X){P.warn(X)}}async getHeartbeatsHeader(){var Z;try{if(this._heartbeatsCache===null)await this._heartbeatsCachePromise;if(((Z=this._heartbeatsCache)===null||Z===void 0?void 0:Z.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let Q=o0(),{heartbeatsToSend:X,unsentEntries:G}=S4(this._heartbeatsCache.heartbeats),J=e(JSON.stringify({version:2,heartbeats:X}));if(this._heartbeatsCache.lastSentHeartbeatDate=Q,G.length>0)this._heartbeatsCache.heartbeats=G,await this._storage.overwrite(this._heartbeatsCache);else this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);return J}catch(Q){return P.warn(Q),""}}}function o0(){return new Date().toISOString().substring(0,10)}function S4(Z,Q=L4){let X=[],G=Z.slice();for(let J of Z){let $=X.find((z)=>z.agent===J.agent);if(!$){if(X.push({agent:J.agent,dates:[J.date]}),n0(X)>Q){X.pop();break}}else if($.dates.push(J.date),n0(X)>Q){$.dates.pop();break}G=G.slice(1)}return{heartbeatsToSend:X,unsentEntries:G}}class X6{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){if(!m())return!1;else return d().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};else{let Q=await I4(this.app);if(Q===null||Q===void 0?void 0:Q.heartbeats)return Q;else return{heartbeats:[]}}}async overwrite(Z){var Q;if(!await this._canUseIndexedDBPromise)return;else{let G=await this.read();return s0(this.app,{lastSentHeartbeatDate:(Q=Z.lastSentHeartbeatDate)!==null&&Q!==void 0?Q:G.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}}async add(Z){var Q;if(!await this._canUseIndexedDBPromise)return;else{let G=await this.read();return s0(this.app,{lastSentHeartbeatDate:(Q=Z.lastSentHeartbeatDate)!==null&&Q!==void 0?Q:G.lastSentHeartbeatDate,heartbeats:[...G.heartbeats,...Z.heartbeats]})}}}function n0(Z){return e(JSON.stringify({version:2,heartbeats:Z})).length}function _4(Z){I(new F("platform-logger",(Q)=>new t0(Q),"PRIVATE")),I(new F("heartbeat",(Q)=>new Q6(Q),"PRIVATE")),x(U0,i0,Z),x(U0,i0,"esm2017"),x("fire-js","")}_4("");var R4="firebase",A4="11.0.2";x(R4,A4,"app");var $6="@firebase/installations",M0="0.6.11",z6=1e4,W6=`w:${M0}`,K6="FIS_v2",D4="https://firebaseinstallations.googleapis.com/v1",O4=3600000,h4="installations",C4="Installations",T4={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},D=new S(h4,C4,T4);function Y6(Z){return Z instanceof B&&Z.code.includes("request-failed")}function H6({projectId:Z}){return`${D4}/projects/${Z}/installations`}function U6(Z){return{token:Z.token,requestStatus:2,expiresIn:E4(Z.expiresIn),creationTime:Date.now()}}async function V6(Z,Q){let G=(await Q.json()).error;return D.create("request-failed",{requestName:Z,serverCode:G.code,serverMessage:G.message,serverStatus:G.status})}function q6({apiKey:Z}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Z})}function k4(Z,{refreshToken:Q}){let X=q6(Z);return X.append("Authorization",y4(Q)),X}async function w6(Z){let Q=await Z();if(Q.status>=500&&Q.status<600)return Z();return Q}function E4(Z){return Number(Z.replace("s","000"))}function y4(Z){return`${K6} ${Z}`}async function f4({appConfig:Z,heartbeatServiceProvider:Q},{fid:X}){let G=H6(Z),J=q6(Z),$=Q.getImmediate({optional:!0});if($){let K=await $.getHeartbeatsHeader();if(K)J.append("x-firebase-client",K)}let z={fid:X,authVersion:K6,appId:Z.appId,sdkVersion:W6},W={method:"POST",headers:J,body:JSON.stringify(z)},Y=await w6(()=>fetch(G,W));if(Y.ok){let K=await Y.json();return{fid:K.fid||X,registrationStatus:2,refreshToken:K.refreshToken,authToken:U6(K.authToken)}}else throw await V6("Create Installation",Y)}function F6(Z){return new Promise((Q)=>{setTimeout(Q,Z)})}function v4(Z){return btoa(String.fromCharCode(...Z)).replace(/\+/g,"-").replace(/\//g,"_")}var u4=/^[cdef][\w-]{21}$/,B0="";function b4(){try{let Z=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(Z),Z[0]=112+Z[0]%16;let X=m4(Z);return u4.test(X)?X:B0}catch(Z){return B0}}function m4(Z){return v4(Z).substr(0,22)}function r(Z){return`${Z.appName}!${Z.appId}`}var j6=new Map;function x6(Z,Q){let X=r(Z);B6(X,Q),d4(X,Q)}function B6(Z,Q){let X=j6.get(Z);if(!X)return;for(let G of X)G(Q)}function d4(Z,Q){let X=c4();if(X)X.postMessage({key:Z,fid:Q});g4()}var A=null;function c4(){if(!A&&"BroadcastChannel"in self)A=new BroadcastChannel("[Firebase] FID Change"),A.onmessage=(Z)=>{B6(Z.data.key,Z.data.fid)};return A}function g4(){if(j6.size===0&&A)A.close(),A=null}var p4="firebase-installations-database",l4=1,O="firebase-installations-store",j0=null;function P0(){if(!j0)j0=M(p4,l4,{upgrade:(Z,Q)=>{switch(Q){case 0:Z.createObjectStore(O)}}});return j0}async function i(Z,Q){let X=r(Z),J=(await P0()).transaction(O,"readwrite"),$=J.objectStore(O),z=await $.get(X);if(await $.put(Q,X),await J.done,!z||z.fid!==Q.fid)x6(Z,Q.fid);return Q}async function M6(Z){let Q=r(Z),G=(await P0()).transaction(O,"readwrite");await G.objectStore(O).delete(Q),await G.done}async function s(Z,Q){let X=r(Z),J=(await P0()).transaction(O,"readwrite"),$=J.objectStore(O),z=await $.get(X),W=Q(z);if(W===void 0)await $.delete(X);else await $.put(W,X);if(await J.done,W&&(!z||z.fid!==W.fid))x6(Z,W.fid);return W}async function I0(Z){let Q,X=await s(Z.appConfig,(G)=>{let J=i4(G),$=r4(Z,J);return Q=$.registrationPromise,$.installationEntry});if(X.fid===B0)return{installationEntry:await Q};return{installationEntry:X,registrationPromise:Q}}function i4(Z){let Q=Z||{fid:b4(),registrationStatus:0};return P6(Q)}function r4(Z,Q){if(Q.registrationStatus===0){if(!navigator.onLine){let J=Promise.reject(D.create("app-offline"));return{installationEntry:Q,registrationPromise:J}}let X={fid:Q.fid,registrationStatus:1,registrationTime:Date.now()},G=s4(Z,X);return{installationEntry:X,registrationPromise:G}}else if(Q.registrationStatus===1)return{installationEntry:Q,registrationPromise:o4(Z)};else return{installationEntry:Q}}async function s4(Z,Q){try{let X=await f4(Z,Q);return i(Z.appConfig,X)}catch(X){if(Y6(X)&&X.customData.serverCode===409)await M6(Z.appConfig);else await i(Z.appConfig,{fid:Q.fid,registrationStatus:0});throw X}}async function o4(Z){let Q=await G6(Z.appConfig);while(Q.registrationStatus===1)await F6(100),Q=await G6(Z.appConfig);if(Q.registrationStatus===0){let{installationEntry:X,registrationPromise:G}=await I0(Z);if(G)return G;else return X}return Q}function G6(Z){return s(Z,(Q)=>{if(!Q)throw D.create("installation-not-found");return P6(Q)})}function P6(Z){if(n4(Z))return{fid:Z.fid,registrationStatus:0};return Z}function n4(Z){return Z.registrationStatus===1&&Z.registrationTime+z6<Date.now()}async function t4({appConfig:Z,heartbeatServiceProvider:Q},X){let G=a4(Z,X),J=k4(Z,X),$=Q.getImmediate({optional:!0});if($){let K=await $.getHeartbeatsHeader();if(K)J.append("x-firebase-client",K)}let z={installation:{sdkVersion:W6,appId:Z.appId}},W={method:"POST",headers:J,body:JSON.stringify(z)},Y=await w6(()=>fetch(G,W));if(Y.ok){let K=await Y.json();return U6(K)}else throw await V6("Generate Auth Token",Y)}function a4(Z,{fid:Q}){return`${H6(Z)}/${Q}/authTokens:generate`}async function L0(Z,Q=!1){let X,G=await s(Z.appConfig,($)=>{if(!I6($))throw D.create("not-registered");let z=$.authToken;if(!Q&&Q3(z))return $;else if(z.requestStatus===1)return X=e4(Z,Q),$;else{if(!navigator.onLine)throw D.create("app-offline");let W=G3($);return X=Z3(Z,W),W}});return X?await X:G.authToken}async function e4(Z,Q){let X=await J6(Z.appConfig);while(X.authToken.requestStatus===1)await F6(100),X=await J6(Z.appConfig);let G=X.authToken;if(G.requestStatus===0)return L0(Z,Q);else return G}function J6(Z){return s(Z,(Q)=>{if(!I6(Q))throw D.create("not-registered");let X=Q.authToken;if(J3(X))return Object.assign(Object.assign({},Q),{authToken:{requestStatus:0}});return Q})}async function Z3(Z,Q){try{let X=await t4(Z,Q),G=Object.assign(Object.assign({},Q),{authToken:X});return await i(Z.appConfig,G),X}catch(X){if(Y6(X)&&(X.customData.serverCode===401||X.customData.serverCode===404))await M6(Z.appConfig);else{let G=Object.assign(Object.assign({},Q),{authToken:{requestStatus:0}});await i(Z.appConfig,G)}throw X}}function I6(Z){return Z!==void 0&&Z.registrationStatus===2}function Q3(Z){return Z.requestStatus===2&&!X3(Z)}function X3(Z){let Q=Date.now();return Q<Z.creationTime||Z.creationTime+Z.expiresIn<Q+O4}function G3(Z){let Q={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},Z),{authToken:Q})}function J3(Z){return Z.requestStatus===1&&Z.requestTime+z6<Date.now()}async function $3(Z){let Q=Z,{installationEntry:X,registrationPromise:G}=await I0(Q);if(G)G.catch(console.error);else L0(Q).catch(console.error);return X.fid}async function z3(Z,Q=!1){let X=Z;return await W3(X),(await L0(X,Q)).token}async function W3(Z){let{registrationPromise:Q}=await I0(Z);if(Q)await Q}function K3(Z){if(!Z||!Z.options)throw x0("App Configuration");if(!Z.name)throw x0("App Name");let Q=["projectId","apiKey","appId"];for(let X of Q)if(!Z.options[X])throw x0(X);return{appName:Z.name,projectId:Z.options.projectId,apiKey:Z.options.apiKey,appId:Z.options.appId}}function x0(Z){return D.create("missing-app-config-values",{valueName:Z})}var L6="installations",Y3="installations-internal",H3=(Z)=>{let Q=Z.getProvider("app").getImmediate(),X=K3(Q),G=E(Q,"heartbeat");return{app:Q,appConfig:X,heartbeatServiceProvider:G,_delete:()=>Promise.resolve()}},U3=(Z)=>{let Q=Z.getProvider("app").getImmediate(),X=E(Q,L6).getImmediate();return{getId:()=>$3(X),getToken:(J)=>z3(X,J)}};function V3(){I(new F(L6,H3,"PUBLIC")),I(new F(Y3,U3,"PRIVATE"))}V3();x($6,M0);x($6,M0,"esm2017");var q3="/firebase-messaging-sw.js",w3="/firebase-cloud-messaging-push-scope",O6="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",F3="https://fcmregistrations.googleapis.com/v1",h6="google.c.a.c_id",j3="google.c.a.c_l",x3="google.c.a.ts",B3="google.c.a.e",N6;(function(Z){Z[Z.DATA_MESSAGE=1]="DATA_MESSAGE",Z[Z.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(N6||(N6={}));var y;(function(Z){Z.PUSH_RECEIVED="push-received",Z.NOTIFICATION_CLICKED="notification-clicked"})(y||(y={}));function L(Z){let Q=new Uint8Array(Z);return btoa(String.fromCharCode(...Q)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function M3(Z){let Q="=".repeat((4-Z.length%4)%4),X=(Z+Q).replace(/\-/g,"+").replace(/_/g,"/"),G=atob(X),J=new Uint8Array(G.length);for(let $=0;$<G.length;++$)J[$]=G.charCodeAt($);return J}var N0="fcm_token_details_db",P3=5,S6="fcm_token_object_Store";async function I3(Z){if("databases"in indexedDB){if(!(await indexedDB.databases()).map(($)=>$.name).includes(N0))return null}let Q=null;return(await M(N0,P3,{upgrade:async(G,J,$,z)=>{var W;if(J<2)return;if(!G.objectStoreNames.contains(S6))return;let Y=z.objectStore(S6),K=await Y.index("fcmSenderId").get(Z);if(await Y.clear(),!K)return;if(J===2){let H=K;if(!H.auth||!H.p256dh||!H.endpoint)return;Q={token:H.fcmToken,createTime:(W=H.createTime)!==null&&W!==void 0?W:Date.now(),subscriptionOptions:{auth:H.auth,p256dh:H.p256dh,endpoint:H.endpoint,swScope:H.swScope,vapidKey:typeof H.vapidKey==="string"?H.vapidKey:L(H.vapidKey)}}}else if(J===3){let H=K;Q={token:H.fcmToken,createTime:H.createTime,subscriptionOptions:{auth:L(H.auth),p256dh:L(H.p256dh),endpoint:H.endpoint,swScope:H.swScope,vapidKey:L(H.vapidKey)}}}else if(J===4){let H=K;Q={token:H.fcmToken,createTime:H.createTime,subscriptionOptions:{auth:L(H.auth),p256dh:L(H.p256dh),endpoint:H.endpoint,swScope:H.swScope,vapidKey:L(H.vapidKey)}}}}})).close(),await p(N0),await p("fcm_vapid_details_db"),await p("undefined"),L3(Q)?Q:null}function L3(Z){if(!Z||!Z.subscriptionOptions)return!1;let{subscriptionOptions:Q}=Z;return typeof Z.createTime==="number"&&Z.createTime>0&&typeof Z.token==="string"&&Z.token.length>0&&typeof Q.auth==="string"&&Q.auth.length>0&&typeof Q.p256dh==="string"&&Q.p256dh.length>0&&typeof Q.endpoint==="string"&&Q.endpoint.length>0&&typeof Q.swScope==="string"&&Q.swScope.length>0&&typeof Q.vapidKey==="string"&&Q.vapidKey.length>0}var N3="firebase-messaging-database",S3=1,f="firebase-messaging-store",S0=null;function C6(){if(!S0)S0=M(N3,S3,{upgrade:(Z,Q)=>{switch(Q){case 0:Z.createObjectStore(f)}}});return S0}async function _3(Z){let Q=T6(Z),G=await(await C6()).transaction(f).objectStore(f).get(Q);if(G)return G;else{let J=await I3(Z.appConfig.senderId);if(J)return await R0(Z,J),J}}async function R0(Z,Q){let X=T6(Z),J=(await C6()).transaction(f,"readwrite");return await J.objectStore(f).put(Q,X),await J.done,Q}function T6({appConfig:Z}){return Z.appId}var R3={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},q=new S("messaging","Messaging",R3);async function A3(Z,Q){let X=await D0(Z),G=k6(Q),J={method:"POST",headers:X,body:JSON.stringify(G)},$;try{$=await(await fetch(A0(Z.appConfig),J)).json()}catch(z){throw q.create("token-subscribe-failed",{errorInfo:z===null||z===void 0?void 0:z.toString()})}if($.error){let z=$.error.message;throw q.create("token-subscribe-failed",{errorInfo:z})}if(!$.token)throw q.create("token-subscribe-no-token");return $.token}async function D3(Z,Q){let X=await D0(Z),G=k6(Q.subscriptionOptions),J={method:"PATCH",headers:X,body:JSON.stringify(G)},$;try{$=await(await fetch(`${A0(Z.appConfig)}/${Q.token}`,J)).json()}catch(z){throw q.create("token-update-failed",{errorInfo:z===null||z===void 0?void 0:z.toString()})}if($.error){let z=$.error.message;throw q.create("token-update-failed",{errorInfo:z})}if(!$.token)throw q.create("token-update-no-token");return $.token}async function O3(Z,Q){let G={method:"DELETE",headers:await D0(Z)};try{let $=await(await fetch(`${A0(Z.appConfig)}/${Q}`,G)).json();if($.error){let z=$.error.message;throw q.create("token-unsubscribe-failed",{errorInfo:z})}}catch(J){throw q.create("token-unsubscribe-failed",{errorInfo:J===null||J===void 0?void 0:J.toString()})}}function A0({projectId:Z}){return`${F3}/projects/${Z}/registrations`}async function D0({appConfig:Z,installations:Q}){let X=await Q.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Z.apiKey,"x-goog-firebase-installations-auth":`FIS ${X}`})}function k6({p256dh:Z,auth:Q,endpoint:X,vapidKey:G}){let J={web:{endpoint:X,auth:Q,p256dh:Z}};if(G!==O6)J.web.applicationPubKey=G;return J}var h3=604800000;async function C3(Z){let Q=await k3(Z.swRegistration,Z.vapidKey),X={vapidKey:Z.vapidKey,swScope:Z.swRegistration.scope,endpoint:Q.endpoint,auth:L(Q.getKey("auth")),p256dh:L(Q.getKey("p256dh"))},G=await _3(Z.firebaseDependencies);if(!G)return _6(Z.firebaseDependencies,X);else if(!E3(G.subscriptionOptions,X)){try{await O3(Z.firebaseDependencies,G.token)}catch(J){console.warn(J)}return _6(Z.firebaseDependencies,X)}else if(Date.now()>=G.createTime+h3)return T3(Z,{token:G.token,createTime:Date.now(),subscriptionOptions:X});else return G.token}async function T3(Z,Q){try{let X=await D3(Z.firebaseDependencies,Q),G=Object.assign(Object.assign({},Q),{token:X,createTime:Date.now()});return await R0(Z.firebaseDependencies,G),X}catch(X){throw X}}async function _6(Z,Q){let G={token:await A3(Z,Q),createTime:Date.now(),subscriptionOptions:Q};return await R0(Z,G),G.token}async function k3(Z,Q){let X=await Z.pushManager.getSubscription();if(X)return X;return Z.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:M3(Q)})}function E3(Z,Q){let X=Q.vapidKey===Z.vapidKey,G=Q.endpoint===Z.endpoint,J=Q.auth===Z.auth,$=Q.p256dh===Z.p256dh;return X&&G&&J&&$}function R6(Z){let Q={from:Z.from,collapseKey:Z.collapse_key,messageId:Z.fcmMessageId};return y3(Q,Z),f3(Q,Z),v3(Q,Z),Q}function y3(Z,Q){if(!Q.notification)return;Z.notification={};let X=Q.notification.title;if(X)Z.notification.title=X;let G=Q.notification.body;if(G)Z.notification.body=G;let J=Q.notification.image;if(J)Z.notification.image=J;let $=Q.notification.icon;if($)Z.notification.icon=$}function f3(Z,Q){if(!Q.data)return;Z.data=Q.data}function v3(Z,Q){var X,G,J,$,z;if(!Q.fcmOptions&&!((X=Q.notification)===null||X===void 0?void 0:X.click_action))return;Z.fcmOptions={};let W=(J=(G=Q.fcmOptions)===null||G===void 0?void 0:G.link)!==null&&J!==void 0?J:($=Q.notification)===null||$===void 0?void 0:$.click_action;if(W)Z.fcmOptions.link=W;let Y=(z=Q.fcmOptions)===null||z===void 0?void 0:z.analytics_label;if(Y)Z.fcmOptions.analyticsLabel=Y}function u3(Z){return typeof Z==="object"&&!!Z&&h6 in Z}b3("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function b3(Z,Q){let X=[];for(let G=0;G<Z.length;G++)if(X.push(Z.charAt(G)),G<Q.length)X.push(Q.charAt(G));return X.join("")}function m3(Z){if(!Z||!Z.options)throw _0("App Configuration Object");if(!Z.name)throw _0("App Name");let Q=["projectId","apiKey","appId","messagingSenderId"],{options:X}=Z;for(let G of Q)if(!X[G])throw _0(G);return{appName:Z.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}function _0(Z){return q.create("missing-app-config-values",{valueName:Z})}class E6{constructor(Z,Q,X){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let G=m3(Z);this.firebaseDependencies={app:Z,appConfig:G,installations:Q,analyticsProvider:X}}_delete(){return Promise.resolve()}}async function d3(Z){try{Z.swRegistration=await navigator.serviceWorker.register(q3,{scope:w3}),Z.swRegistration.update().catch(()=>{})}catch(Q){throw q.create("failed-service-worker-registration",{browserErrorMessage:Q===null||Q===void 0?void 0:Q.message})}}async function c3(Z,Q){if(!Q&&!Z.swRegistration)await d3(Z);if(!Q&&!!Z.swRegistration)return;if(!(Q instanceof ServiceWorkerRegistration))throw q.create("invalid-sw-registration");Z.swRegistration=Q}async function g3(Z,Q){if(Q)Z.vapidKey=Q;else if(!Z.vapidKey)Z.vapidKey=O6}async function y6(Z,Q){if(!navigator)throw q.create("only-available-in-window");if(Notification.permission==="default")await Notification.requestPermission();if(Notification.permission!=="granted")throw q.create("permission-blocked");return await g3(Z,Q===null||Q===void 0?void 0:Q.vapidKey),await c3(Z,Q===null||Q===void 0?void 0:Q.serviceWorkerRegistration),C3(Z)}async function p3(Z,Q,X){let G=l3(Q);(await Z.firebaseDependencies.analyticsProvider.get()).logEvent(G,{message_id:X[h6],message_name:X[j3],message_time:X[x3],message_device_time:Math.floor(Date.now()/1000)})}function l3(Z){switch(Z){case y.NOTIFICATION_CLICKED:return"notification_open";case y.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function i3(Z,Q){let X=Q.data;if(!X.isFirebaseMessaging)return;if(Z.onMessageHandler&&X.messageType===y.PUSH_RECEIVED)if(typeof Z.onMessageHandler==="function")Z.onMessageHandler(R6(X));else Z.onMessageHandler.next(R6(X));let G=X.data;if(u3(G)&&G[B3]==="1")await p3(Z,X.messageType,G)}var A6="@firebase/messaging",D6="0.12.14",r3=(Z)=>{let Q=new E6(Z.getProvider("app").getImmediate(),Z.getProvider("installations-internal").getImmediate(),Z.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(X)=>i3(Q,X)),Q},s3=(Z)=>{let Q=Z.getProvider("messaging").getImmediate();return{getToken:(G)=>y6(Q,G)}};function o3(){I(new F("messaging",r3,"PUBLIC")),I(new F("messaging-internal",s3,"PRIVATE")),x(A6,D6),x(A6,D6,"esm2017")}async function n3(){try{await d()}catch(Z){return!1}return typeof window!=="undefined"&&m()&&u0()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function O0(Z=F0()){return n3().then((Q)=>{if(!Q)throw q.create("unsupported-browser")},(Q)=>{throw q.create("indexed-db-unsupported")}),E(X0(Z),"messaging").getImmediate()}async function f6(Z,Q){return Z=X0(Z),y6(Z,Q)}o3();var t3={["db-update-failed"]:`failed to update {$key} with {$value} for {$objectStoreName}. {$browserErrorMessage}.
Original Error -> {$error}`,["db-read-failed"]:`failed to read {$key} from {$objectStoreName}. {$browserErrorMessage}.
Original Error -> {$error}`,["create-html-failed"]:"failed to create html element with string: {$value}.",["load-yektanet-analytics-script-failed"]:`failed to load tag script with app_id: {$appId}.
Original Error -> {$error}`},a3=/\{\$([^}]+)}/g;function e3(Z,Q){return Z.replace(a3,(X,G)=>{let J=Q[G];return J!=null?String(J):`<${G}?>`})}function h(Z,Q){let X=Q||{},G=t3[Z],J=G?e3(G,X):"Error";return new Error(J)}async function o(Z,Q){try{let G=(await b6()).transaction(Z,"readonly"),J=await G.store.get(Q);return await G.done,J?J:null}catch(X){throw h("db-read-failed",{key:Q,objectStoreName:Z,browserErrorMessage:X.message,error:X})}}async function n(Z,Q,X){try{let J=(await b6()).transaction(Z,"readwrite"),$=await J.store.get(Q),z={name:Q,...X};if($)await J.store.put(z);else await J.store.add(z);await J.done}catch(G){throw h("db-update-failed",{key:Q,value:X,objectStoreName:Z,browserErrorMessage:G.message,error:G})}}var u6=[{name:"token",keyPath:"name"},{name:"activity",keyPath:"name"}];function Z9(Z,Q){if(!Z.objectStoreNames.contains(Q.name))Z.createObjectStore(Q.name,{keyPath:Q.keyPath})}function Q9(Z){for(let Q of Z.objectStoreNames)if(!u6.some((X)=>X.name===Q))Z.deleteObjectStore(Q)}async function b6(){return M("NajvaDB",1,{async upgrade(Z){Q9(Z);for(let Q of u6)Z9(Z,Q)}})}var h0="activity",C0="token";async function t(Z){return await o(C0,Z)}async function m6(Z,Q,X){return n(C0,Z,{value:Q,timestamp:X})}var w={push_url:"https://api.najva.com",push_active_url:"https://push-active.najva.com",biscotti_url:"https://biscotti.yektanet.com",iris_url:"https://iris.najva.com",events_url:"https://events.najva.com",cdn_yektanet_url:"https://cdn.yektanet.com"};var C=(()=>{let Z=null,Q="native-fetch-iframe";return async(X,G="GET",J={},$="include")=>{let z=await t("najva_token");if(!Z){let K=document.getElementById(Q);if(!K)K=document.createElement("iframe"),K.id=Q,K.style.display="none",document.body.appendChild(K);Z=K.contentWindow?.fetch.bind(K.contentWindow)||window.fetch}let W=X.includes(w.events_url),Y={headers:{Accept:"application/json","Content-Type":"application/json",...z&&W?{"X-Najva-Token":z.value}:{}},method:G,credentials:$};if(G!=="GET"&&J&&Object.keys(J).length)Y.body=JSON.stringify(J);try{return(await Z(X,Y)).json()}catch(K){throw V("fetchUrl error:",K,"error"),K}}})();function d6(Z,Q){let X=Math.abs(Z-Q);return Math.ceil(X/86400000)}function c6(Z){let Q=document.createElement("div");if(Q.innerHTML=Z.trim(),!Q.firstElementChild)throw h("create-html-failed",{value:Z});return Q.firstElementChild}function g6(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)}function p6(Z,Q){return new Promise((X,G)=>{let J=document.createElement("script");J.type="text/javascript",J.src=Z,J.async=!0,J.onload=X,J.onerror=G,document[Q].appendChild(J)})}async function V(Z,Q,X="normal"){}async function T(Z){return(await o(h0,Z))?.value}async function v(Z,Q){return n(h0,Z,{value:Q})}async function G9(Z){let Q=await w0(Z.firebase.config);await O0(Q)}async function J9(Z){let Q=O0();return f6(Q,{vapidKey:Z.firebase.vapidKey,serviceWorkerRegistration:await i6(Z)})}async function i6(Z){let Q=await navigator.serviceWorker.register(Z.firebase.swName,{scope:Z.firebase.swScope});if(Q&&Q.waiting)Q.waiting.postMessage({type:"SKIP_WAITING"});return Q.update().catch((X)=>{V("SW update failed",X,"error")}),Q}async function $9(Z){let{afterScrollPercent:Q,afterSeconds:X,afterVisitCount:G}=Z.notificationPopupConfig;if(Q)return new Promise((J)=>{let $=()=>{if(window.scrollY/document.documentElement.scrollHeight*100>=Q)window.removeEventListener("scroll",$),J(!0)};window.addEventListener("scroll",$)});else if(X)return new Promise((J)=>setTimeout(()=>J(!0),X*1000));else if(G)return(await T("visit_count")||1)===+G;return Promise.resolve(!0)}async function z9(Z){let X={token_id:await J9(Z),secret_key:Z.websiteConfig.apiSecret},{Entries:{najva_token:G}}=await C(`${w.events_url}/v3/activity/subscribe`,"POST",X);K9(G),s6()}async function r6(Z){if(!await $9(Z))return;let Q=await W9();if(Q)s6();try{let X=async()=>{G.forEach((z)=>{document.removeEventListener(z,X)});let J=await Notification.requestPermission();if(J!=="granted")throw new Error("Notification permission denied");if(!Q)await G9(Z),await z9(Z),await i6(Z);let $=new CustomEvent("isSubscribedEvent",{detail:Z});return window.dispatchEvent($),J},G=["click","keydown"];if(g6())G.forEach((J)=>{document.addEventListener(J,X,{once:!0})});else return await X()}catch(X){V("Error requesting notification permission:",X,"error")}}async function s6(){let Z=await T0();if(window.NAJVA?.najvaUserSubscribed)window.NAJVA.najvaUserSubscribed(Z)}async function o6(Z){if(!navigator.geolocation){V("Geolocation is not supported by this browser.",void 0,"error");return}navigator.geolocation.getCurrentPosition((Q)=>{let{latitude:X,longitude:G}=Q.coords,J={secret_key:Z.websiteConfig.apiSecret,latitude:X,longitude:G};C(`${w.events_url}/v3/activity/location`,"POST",J)},(Q)=>{V("Error getting geolocation:",Q,"error")},{enableHighAccuracy:!0})}async function W9(){return new Promise((Z,Q)=>{let X=indexedDB.open("NajvaDB");X.onsuccess=function($){let z=$.target.result;if(!z.objectStoreNames.contains("token"))return G();let K=z.transaction("token","readonly").objectStore("token").get("najva_token");K.onsuccess=function(){if(K.result)Z(!0);else G()},K.onerror=function(){Q("Error retrieving najva_token from NajvaDB")}},X.onerror=function(){G()};function G(){let $=indexedDB.open("najva-native-subscription-database");$.onsuccess=function(z){let W=z.target.result;if(!W.objectStoreNames.contains("token")){Z(!1);return}let H=W.transaction("token","readonly").objectStore("token").get("najva_token");H.onsuccess=function(){let N=H.result;if(N)J(N),Z(!0);else Z(!1)}}}function J($){let z=indexedDB.open("NajvaDB",1);z.onsuccess=function(W){let Y=W.target.result;if(!Y.objectStoreNames.contains("token")){V("ObjectStore 'token' not found in NajvaDB",void 0,"error");return}Y.transaction("token","readwrite").objectStore("token").put($)}}})}async function n6(){C(`${w.push_active_url}/api/events/login`,"POST")}async function t6(Z){let Q={secret_key:Z.websiteConfig.apiSecret};C(`${w.events_url}/v3/activity/impression`,"POST",Q)}async function K9(Z){if(Z)await m6("najva_token",Z,new Date().toISOString())}async function T0(){return await t("najva_token").then((Z)=>Z?.value)}var a6={apiKey:"AIzaSyDlgao6nGaw7RsZgjskbXsIhl0mwhOjZz4",authDomain:"push-notif-system.firebaseapp.com",databaseURL:"https://push-notif-system.firebaseio.com",projectId:"push-notif-system",storageBucket:"push-notif-system.appspot.com",messagingSenderId:"334645784830",appId:"1:334645784830:web:f9460dce5c11960c97f5af"},e6="BCCZE7qOLGsByGdnR_RN9kMRWfVR3HzYRCeCV8z9Rzav9XlNx4NQdr5PGmHjE2_Yl-Iv6OyzApKPuIHDdDJENZQ",Z8="/najva-messaging-sw.js",Q8="/najva-messaging-scope";var X8="cookie_matching_pixel";var G8=null;async function J8(Z){if(!G8)try{let Q=await C(`${w.iris_url}/v1/script-settings/settings/website/?api_key=${Z}`,void 0,void 0,"same-origin");if(Q&&Q.account_website_data)return{firebase:{config:a6,vapidKey:e6,swName:Z8,swScope:Q8},cookieMatching:{pixelID:X8},websiteConfig:{websiteID:Q.account_website_data.id.toString(),appID:Q.account_website_data.app_id,apiKey:Q.account_website_data.api_key,apiSecret:Q.account_website_data.api_secret},notificationPopupConfig:{afterVisitCount:Q.show_membership_form_by_views,afterScrollPercent:Q.show_membership_form_scroll_percentage,afterSeconds:Q.show_membership_form_time},serviceAvailabilityConfig:{yektanetUserAnalyticsAvailability:Q.yektanet_user_analytics_availability,pushServiceAvailability:Q.push_service_availability,smsServiceAvailability:Q.sms_service_availability,emailServiceAvailability:Q.email_service_availability},locationConfig:{isLocationRequestEnabled:Q.is_location_request_enabled},isDebugMode:!!Q.is_debug_enabled}}catch(Q){V("Failed to fetch website config:",Q,"error")}return G8}async function $8(Z){if(!await Y9())await H9(Z)}async function Y9(){let Z=await T("last_cookie_matching_sent");return Z?d6(Date.now(),new Date(Z).getTime())<7:!1}async function H9(Z){if(!document.querySelector(`#${Z.cookieMatching.pixelID}`)){let Q=`<img id="cookie_matching_pixel" style="visibility: hidden; position: fixed; bottom: 0; right: 0; z-index: -1;" src="${w.biscotti_url}/pixel?id=najva_new" alt="cookie_matching_pixel" />`,X=c6(Q);if(X)document.body.appendChild(X),await v("last_cookie_matching_sent",new Date().toISOString())}}function z8(){U9(),V9()}async function U9(){let Z=await T("visit_count")||0;Z=parseInt(Z.toString()),await v("visit_count",Z+1)}async function V9(){await v("last_active_time",new Date().toISOString())}async function W8(Z){try{await p6(`${w.cdn_yektanet_url}/rg_woebegone/scripts_v4/${Z.websiteConfig.appID}/complete.js`,"head")}catch(Q){h("load-yektanet-analytics-script-failed",{appId:Z?.websiteConfig.appID||"failed to load config --> appId: -",error:Q})}}function K8(){return document.getElementById("najva-mini-script")?.getAttribute("data-najva-id")??null}function Y8(Z=1e4){return new Promise((Q,X)=>{let G=K8();if(G)return V("[Najva] Najva ID found immediately"),Q(G);let J=new MutationObserver(()=>{let z=K8();if(z)V("[Najva] Najva ID found via MutationObserver"),clearTimeout($),J.disconnect(),Q(z)});J.observe(document.documentElement,{childList:!0,subtree:!0});let $=window.setTimeout(()=>{J.disconnect(),X("[Najva] Timeout: data-najva-id not found within time limit.")},Z)})}function q9(Z){if(document.readyState==="complete")Z();else window.addEventListener("load",Z)}window.addEventListener("isSubscribedEvent",(Z)=>{let Q=Z;if(n6(),Q.detail.locationConfig.isLocationRequestEnabled)o6(Q.detail)});async function w9(Z){try{if(z8(),await t6(Z),Z.serviceAvailabilityConfig.yektanetUserAnalyticsAvailability)await W8(Z),await $8(Z);if(Z.serviceAvailabilityConfig.pushServiceAvailability)await r6(Z);window.NAJVA={getUserToken:T0}}catch(Q){V("Error initializing the app:",Q,"error")}}async function F9(){q9(async()=>{try{let Z=await Y8();V(`[Najva] Najva ID loaded successfully: ${Z}`);let Q=await J8(Z);if(V("[Najva] Website config loaded",Q),!Q)throw new Error("Config could not be retrieved");let X=async()=>{await w9(Q)};if("requestIdleCallback"in window)requestIdleCallback(X);else X()}catch(Z){V("[Najva] Initialization failed:",Z,"error")}})}F9();})();
